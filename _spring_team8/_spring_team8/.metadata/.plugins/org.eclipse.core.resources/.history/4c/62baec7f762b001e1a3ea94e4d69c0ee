<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>My Page</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
	crossorigin="anonymous">
<link href="../../resources/css/user/userMypage.css" rel="stylesheet">
</head>
<body>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
		crossorigin="anonymous"></script>
	<jsp:include page="../layout/header.jsp"></jsp:include>
	<div class="headerSpace"></div>
	<div>
		<img alt="" src="/upload/profile/${uvo.imgFile }"
			style="width: 150px; height: 150px;">
	</div>
	<h1>${uvo.name }</h1>
	@ ${uvo.id } <input type="hidden" id="id" value="${uvo.id }">
	<br> ${uvo.ucontent }
	<br>

	<a data-bs-toggle="modal" data-bs-target="#followingList"
		id="followingCnt"></a>
	<a data-bs-toggle="modal" data-bs-target="#followerList"
		id="followerCnt"></a>

	<!-- Modal -->
	<div class="modal fade" id="followingList" data-bs-backdrop="static"
		data-bs-keyboard="false" tabindex="-1"
		aria-labelledby="staticBackdropLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="staticBackdropLabel">팔로잉</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<table id="followingtable">
					</table>
				</div>

			</div>
		</div>
	</div>

	<!-- Modal -->
	<div class="modal fade" id="followerList" data-bs-backdrop="static"
		data-bs-keyboard="false" tabindex="-1"
		aria-labelledby="staticBackdropLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="staticBackdropLabel">팔로워</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body" id="followerbody">
					<table id="followertable">

					</table>
				</div>

			</div>
		</div>
	</div>

	<br>
	<div id="followZone">
		<c:if test="${ses.id ne uvo.id }">
			<button class="followBtn" data-id="${uvo.id }" data-ses="${ses.id }">팔로우</button>
			<br>
		</c:if>
	</div>

	<c:if test="${ses.id eq uvo.id }">
		<a href="/member/modify?id=${uvo.id }"><button type="button">프로필
				수정</button></a>
		<a href="/member/logout"><button type="button">로그아웃</button></a>
	</c:if>
	<h2>나의 관심사</h2>
	${uvo.utag }
	<br>

	<ul class="nav nav-tabs">
	  <li class="nav-item">
	    <a class="nav-link active" aria-current="page" href="#">좋아요</a>
	  </li>
	  <li class="nav-item">
	    <a class="nav-link" href="#">내가 쓴 글</a>
	  </li>
	</ul>
	<div class="myLikeTab">
	<c:set var="divid" value="0"></c:set>
<div class="headerSpace"></div>
    <div class="bigBox">
        <c:choose>
            <c:when test="${list.size()==0 }">
                글을 찾을 수 없습니다
            </c:when>
            <c:otherwise>
                <c:forEach items="${list }" var="bvo">
                    <div class="pp" id="box${divid }">
                        <div class="contentBox" data-bno="${bvo.bno}" data-title="${bvo.title}" data-pushId="${ses.id }"
                             data-pushName="${ses.name }" data-id="${bvo.id }">
                            <a href="/board/detail?bno=${bvo.bno}"><button class="hid hiddenText">aa</button></a>
                            ${bvo.bno}<br>
                            ♡<span class="tspan">${bvo.likeCount}</span>
                            <button class="likeBtn hid hiddenText">좋아요</button>
                            <br>
                        </div>
                    </div>
                    <c:set var="divid" value="${divid + 1}" />
                </c:forEach>
            </c:otherwise>
        </c:choose>
    </div>
	</div>
	<div class="myPostTab"></div>

	<script type="text/javascript" src="../../resources/js/user/userMypage.js"></script>
	<script type="text/javascript">
		const id = '<c:out value="${uvo.id}" />';
		const ses = '<c:out value="${ses.id}" />';
		getFollowList(id, ses);
	</script>

</body>
</html>