<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
	crossorigin="anonymous">
<link href="/resources/css/board/boardDetail.css" rel="stylesheet" />


<title>board detail page</title>
</head>
<body>
	<jsp:include page="../layout/header.jsp"></jsp:include>
	<div class="headerSpace"></div>

	<c:set var="thLoop" value="0" />
	<c:set var="board" value="${boardDTO.bvo}"></c:set>
	<br>



	<div class="container">
		<a href="/board/list"> <span class="back">â— ë’¤ë¡œê°€ê¸° </span></a>



		<div class="dropBox">
			<div class="imageBox">


				<c:choose>
					<c:when test="${fList.size() == 0 }">
								ë“±ë¡ëœ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤
							</c:when>
					<c:otherwise>
						<div id="carouselExampleIndicators" class="carousel slide"
							data-bs-ride="false">
							<ol class="carousel-indicators">
								<c:forEach items="${fList}" var="fvo" varStatus="loop">
									<li data-bs-target="#carouselExampleIndicators"
										data-bs-slide-to="${loop.index}"
										<c:if test="${loop.first}">class="active"</c:if>></li>
								</c:forEach>
							</ol>
							<div class="carousel-inner">
								<c:forEach items="${fList}" var="fvo" varStatus="loop">
									<div
										class="carousel-item <c:if test="${loop.first}">active</c:if>">
										<img
											src="/upload/${fn:replace(fvo.saveDir, '\\', '/')}/${fvo.uuid}_${fvo.fileName}"
											class="d-block w-100 mainImg" alt="..."
											data-uuid="${fvo.uuid }">
									</div>
								</c:forEach>
							</div>
							<a class="carousel-control-prev"
								href="#carouselExampleIndicators" role="button"
								data-bs-slide="prev"> <span
								class="carousel-control-prev-icon" aria-hidden="true"></span> <span
								class="visually-hidden">Previous</span>
							</a> <a class="carousel-control-next"
								href="#carouselExampleIndicators" role="button"
								data-bs-slide="next"> <span
								class="carousel-control-next-icon" aria-hidden="true"></span> <span
								class="visually-hidden">Next</span>
							</a>
						</div>

						<br>
						<div class="thBox" id="thBox">
							<c:forEach items="${fList}" var="fvo">
								<div class="thumb" data-uuid="${fvo.uuid }">
									<img
										src="/upload/${fn:replace(fvo.saveDir, '\\', '/')}/${fvo.uuid}_th_${fvo.fileName}"
										class="thImg" id="${thLoop}">

								</div>
								<c:set var="thLoop" value="${thLoop + 1}" />
							</c:forEach>
						</div>
					</c:otherwise>
				</c:choose>
			</div>
		</div>
		<br>

		<div id="boardBox" class="boardBox">
			
				
					
					<p style="text-align: right">ë²ˆí˜¸.${board.bno} <br>
					ì‘ì„±ì : ${board.id}</p>
				
			
				
						<h1>  ${board.title}</h1>
					
				
					<div style="border: 1px solid black; padding: 10px; border-radius: 20px;"> <p>${board.bcontent}</p> </div> <br>
					<p>    ${board.btag }</p>
	
				
			
					<h3 style="text-align: right" >ì–´ë– ì…¨ë‚˜ìš”? <button id="likeImg" style="border: 0; background-color: transparent;">ğŸ¤</button> 
					<span style="font-size: 14px;">${board.likeCount}</span></h3>
		
		
					<p style="text-align: right">ì‘ì„±ì¼ ${board.regDate}</p>
			

					<div class="toggle" id="toggleComment">
					 <h2 style="text-align: left; margin-left: 10px" id="tH1">   ëŒ“ê¸€ â–·</h2></div>
			
			
			
			<div class="commentContainer" id="commentContainer" style="display: none;">
			
			<div class="commentBox" id="commentBox">
						<span id="cmtWriter">${ses.name}</span> 
						<input type="text" id="cmtText" placeholder="Test Add Comment">
						<button type="button" id="emojiBtn">ğŸ˜ƒ</button>
						<button type="button" id="cmtPostBtn" data-bno="${board.bno}"
							data-title="${board.title}" data-boardid="${board.id}">
							ë“±ë¡</button>
						<div id="emojiContainer">
						</div>
					
				</div>
				
					<ul id="cmtListArea">
						<!-- ê¸°ì¡´ ì½”ë“œ... -->
					</ul>
			</div>
				


		</div>
		
		<div class="modify-delete-buttons">
			<c:if test="${ses.id eq board.id}">
				<a href="/board/modify?bno=${board.bno}"><button>ìˆ˜ì •</button></a>
				<a href="/board/delete?bno=${board.bno}"><button>ì‚­ì œ</button></a>
			</c:if>
			</div>
	</div>



	<script type="text/javascript">
		const bnoVal = '<c:out value="${boardDTO.bvo.bno}" />';
		console.log("bno : " + bnoVal);
	</script>
	
	<script type="text/javascript">
	const sesVal = '<c:out value="${ses.name}" />';
	console.log("ses.id : "+ sesVal );
	</script>
	
	<script type="text/javascript"
		src="/resources/js/board/boardComment.js"></script>
	<script type="text/javascript">
		getCommentList(bnoVal);
	</script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
		crossorigin="anonymous"></script>

</body>
</html>